# CVE-2018-8291 DictionaryPropertyDescriptor::CopyFrom missed copying some properties

## Abstract

* Credit: Lokihardt of Google Project Zero
* Location: Runtime\Types\DictionaryPropertyDescriptor.h
* Patch:https://github.com/Microsoft/ChakraCore/pull/5444/commits/c322694178ece209b0aa73eafd97a036def86eb1


## Content
What is the DictionaryPropertyDescriptor?

Let's look at Object.defineProperty() method.
It's syntax is below.
```
Object.defineProperty(obj, prop, descriptor)
```
This function's 3th argument is the property descriptor object.
But in ChakraCore DictionaryPropertyDescriptor Class is an basic type,it's used by DictionaryTypeHandlerBase class. DictionaryTypeHandlerBase class is responsible for dealing with Object's properties.

In the `DictionaryTypeHandlerBase<T>::ConvertToBigDictionaryTypeHandler` function CopyFrom method has been called.
If DictionaryTypeHandlerBase can't contain so much more properties,it will invoke ConvertToBigDictionaryTypeHandler.
Such as:
```
this->GetSlotCapacity() < nextPropertyIndex
```
or
```
this->GetSlotCapacity() > MaxPropertyIndexSize
```

## Conclusion
unknow influenceen
unknow trigger path
